# Linux_Network

---

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –∞–¥—Ä–µ—Å–∞

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ü—Ä–∏–º–µ—Ä |
| --- | --- | --- |
| `ip a` | –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ IP | –ë—ã—Å—Ç—Ä—ã–π –æ–±–∑–æ—Ä –∞–¥—Ä–µ—Å–æ–≤ |
| `ip -br a` | –ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥ –∞–¥—Ä–µ—Å–æ–≤ | –ë—ã—Å—Ç—Ä–µ–µ —Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å |
| `ip -br link` | –ö—Ä–∞—Ç–∫–∏–π —Å—Ç–∞—Ç—É—Å –ª–∏–Ω–∫–∞ | –í–∏–¥–Ω–æ `UP/LOWER_UP`, carrier |
| `sudo ip link set wlo1 up` | –ü–æ–¥–Ω—è—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –í–∫–ª—é—á–∏—Ç—å –∫–∞—Ä—Ç—É |
| `sudo ip addr add 192.168.1.10/24 dev wlo1` | –î–æ–±–∞–≤–∏—Ç—å –∞–¥—Ä–µ—Å | –†—É—á–Ω–æ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP |
| `sudo ip route replace default via 192.168.1.1 dev wlo1` | –ù–∞–∑–Ω–∞—á–∏—Ç—å —à–ª—é–∑ | –î–æ–±–∞–≤–∏—Ç—å/–∑–∞–º–µ–Ω–∏—Ç—å default |
| `ip route` | –¢–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å gateway/–º–µ—Ç—Ä–∏–∫–∏ |
| `ip route get 1.1.1.1` | –ö–∞–∫–æ–π –º–∞—Ä—à—Ä—É—Ç —Å—Ä–∞–±–æ—Ç–∞–µ—Ç | –ü–æ–∫–∞–∂–µ—Ç iface/—à–ª—é–∑ |
| `ip -s link` | RX/TX, –æ—à–∏–±–∫–∏/–¥—Ä–æ–ø—ã | –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ L2 |
| `ip neigh` | ARP/ND —Ç–∞–±–ª–∏—Ü–∞ | –í–∏–¥–Ω–æ –ª–∏ —à–ª—é–∑ |
| `iw dev wlo1 link` | –°—Ç–∞—Ç—É—Å Wi-Fi –ª–∏–Ω–∫–∞ | SSID, —Å–∏–≥–Ω–∞–ª, bitrate |
| `resolvectl status` | DNS, search-–¥–æ–º–µ–Ω | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑–æ–ª–≤–µ—Ä–∞ |

`ls /sys/class/net` ‚Äî  —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

`nmcli device status` ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å —Å NetworkManager

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ü—Ä–∏–º–µ—Ä |
| --- | --- | --- |
| `ping -c3 8.8.8.8` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ICMP –¥–æ IP | –ï—Å—Ç—å –ª–∏ –¥–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç |
| `ping -c3 google.com` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS+ICMP | –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∏–º—è |
| `resolvectl query host` | –ß–∏—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ DNS | –ê–ª—å—Ç: `dig +short host` |
| `nc -vz -w3 host 22` | –ü—Ä–æ–≤–µ—Ä–∫–∞ TCP-–ø–æ—Ä—Ç–∞ (SSH) | –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å ssh |
| `curl -I https://site.com` | HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±–∞ |
| `wget --spider https://site.com` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ URL | –õ–µ–≥–∫–æ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö |
| `traceroute host` | –ú–∞—Ä—à—Ä—É—Ç –¥–æ —Ö–æ—Å—Ç–∞ | –ì–¥–µ –æ–±—Ä—ã–≤ |
| `mtr -rw host` | –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –ñ–∏–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ |

---

## –°–æ–∫–µ—Ç—ã –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ü—Ä–∏–º–µ—Ä |
| --- | --- | --- |
| `ss -tulpn` | TCP/UDP + –ø–æ—Ä—Ç—ã + PID | –ö—Ç–æ —Å–ª—É—à–∞–µ—Ç |
| `ss -ltnp` | –¢–æ–ª—å–∫–æ **TCP LISTEN** + PID | –°–µ—Ä–≤–µ—Ä–Ω—ã–µ TCP-–ø–æ—Ä—Ç—ã |
| `ss -lunp` | –¢–æ–ª—å–∫–æ **UDP** + PID |  |
| `ss -H state established` | –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | –ñ–∏–≤—ã–µ TCP-—Å–µ—Å—Å–∏–∏, dport = :443 |
| `ss -o state listening '( sport = :22 )'` | –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ—Ä—Ç—É | –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH: —Å–ª—É—à–∞–µ—Ç –ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ `:22`. |
| `lsof -i :80` | –ö—Ç–æ –¥–µ—Ä–∂–∏—Ç –ø–æ—Ä—Ç 80 | –£–¥–æ–±–Ω–æ —É–≤–∏–¥–µ—Ç—å –ø—É—Ç—å –∫ –±–∏–Ω–∞—Ä—é |
| `fuser -n tcp 80` | PID –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞ –ø–æ—Ä—Ç—É |  |

---

## DNS

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ü—Ä–∏–º–µ—Ä |
| --- | --- | --- |
| `dig google.com` | A-–∑–∞–ø–∏—Å—å —Å –¥–µ—Ç–∞–ª—è–º–∏ | IP –∞–¥—Ä–µ—Å + TTL/—Å–µ—Ä–≤–µ—Ä |
| `dig +short google.com` | –ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥ | –£–¥–æ–±–Ω–æ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤ |
| `dig @8.8.8.8 site.com` | –£–∫–∞–∑–∞—Ç—å —Å–µ—Ä–≤–µ—Ä | –û–±—Ö–æ–¥–∏–º –ª–æ–∫–∞–ª—å–Ω—ã–π DNS |
| `dig AAAA site.com` | IPv6-–∞–¥—Ä–µ—Å |  |
| `dig MX site.com +short` | –ü–æ—á—Ç–æ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã MX |
| `dig TXT site.com +short` | TXT (SPF/–≤—Å—è–∫–æ–µ) | –ë—ã—Å—Ç—Ä–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ |
| `dig NS site.com +short` | –ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ NS |  |
| `resolvectl query site.com` | –ß–µ—Ä–µ–∑ systemd-resolved | –ö—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç, —á—Ç–æ –æ—Ç–≤–µ—Ç–∏–ª |
| `nslookup site.com` | –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± | –ò–Ω–æ–≥–¥–∞ –≤—Å—ë –µ—â—ë –Ω—É–∂–µ–Ω |

---

## Firewall / Ports

### UFW (Ubuntu-friendly)

```bash
#—É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Ç–æ–∏—Ç
sudo apt install -y ufw

#IPv6 —Ç–æ–∂–µ —Ñ–∏–ª—å—Ç—Ä—É–µ–º
grep ^IPV6= /etc/ufw/ufw.conf || true
sudo sed -i 's/^IPV6=.*/IPV6=yes/' /etc/ufw/ufw.conf

#–ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
sudo ufw default deny incoming
sudo ufw default allow outgoing

#–¥–æ—Å—Ç—É–ø –∫ —Å–µ–±–µ
sudo ufw allow OpenSSH          # –∏–ª–∏: sudo ufw allow 22/tcp
sudo ufw limit 22/tcp           # –ª—ë–≥–∫–∏–π rate-limit
sudo ufw allow 80,443/tcp       # –µ—Å–ª–∏ –≥–æ–Ω—è–µ—à—å nginx

#–≤–∫–ª—é—á–∞–µ–º
sudo ufw enable
sudo ufw status verbose

#–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
sudo ufw disable
sudo ufw reset   # –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ (—Å–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
```

---

## Troubleshooting

| –°–∏—Ç—É–∞—Ü–∏—è | –ö–æ–º–∞–Ω–¥–∞ |
| --- | --- |
| –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –ø–∏–Ω–≥—É–µ–º IP | `ping -c3 8.8.8.8` |
| IP –µ—Å—Ç—å, DNS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | `dig google.com @8.8.8.8 +short` |
| –°–µ—Ä–≤–∏—Å –Ω–µ —Å–ª—É—à–∞–µ—Ç | `sudo ss -ltnp '( sport = :8080 )‚Äô` |
| –ü–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –Ω–∞ firewall | `sudo ufw status verbose` / `sudo iptables -L -n -v` |
| –ü—Ä–æ–≤–µ—Ä–∏—Ç—å MTU | `ping -M do -s 1472 8.8.8.8` |
| –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å | `iperf3 -c host` |

---

## Network Manager / systemd-networkd

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ì–¥–µ |
| --- | --- |
| `nmcli` | NetworkManager (desktop/server Ubuntu) |
| `nmtui` | TUI –¥–ª—è NM |
| `systemctl status systemd-networkd` | –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã |
| –ö–æ–Ω—Ñ–∏–≥–∏ | `/etc/netplan/*.yaml` |

–ö—Ç–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ç—å—é —Å–µ–π—á–∞—Å

```bash
systemctl is-active NetworkManager
systemctl is-active systemd-networkd
sudo netplan get | sed -n '1,80p'     # –∫–∞–∫–æ–π renderer —É–∫–∞–∑–∞–Ω
nmcli device status                   # –µ—Å–ª–∏ NM –∞–∫—Ç–∏–≤–µ–Ω
networkctl list                       # –µ—Å–ª–∏ networkd –∞–∫—Ç–∏–≤–µ–Ω
resolvectl status                     # DNS/–¥–æ–º–µ–Ω –ø–æ–∏—Å–∫–∞
```

- **Desktop** –æ–±—ã—á–Ω–æ: `renderer: NetworkManager`
- **Server (–º–∏–Ω–∏–º–∞–ª–∫–∞)**: `renderer: networkd`

---

## –ü—Ä–∞–∫—Ç–∏–∫—É–º

1. **–ö—Ç–æ —Å–ª—É—à–∞–µ—Ç –Ω–∞ 22-–º –ø–æ—Ä—Ç—É:**

```bash
ss -tulpn | grep :22
```

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∞–π—Ç:**

```bash
curl -I https://example.com
```

1. **–ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞:**

```bash
sudo ufw status verbose
```

1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ DNS:**

```bash
dig +trace site.com
```

1. **–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –¥–æ Google:**

```bash
mtr -rw 8.8.8.8
```

---

## üõ°Ô∏è Security Checklist

- –ù–µ —Å–ª—É—à–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ `0.0.0.0`, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ.
- –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã (–ø—Ä–æ–≤–µ—Ä—è—Ç—å `ss -tulpn`).
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UFW/nftables –¥–ª—è –±–∞–∑–æ–≤–æ–π –∑–∞—â–∏—Ç—ã.
- DNS –ª—É—á—à–µ –∑–∞–¥–∞–≤–∞—Ç—å —è–≤–Ω—ã–π (`1.1.1.1`, `8.8.8.8`).

---

## –ë—ã—Å—Ç—Ä—ã–µ –±–ª–æ–∫–∏

```bash
# –í—Å–µ —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
ss -tulpn

# –ö—Ä–∞—Ç–∫–æ –æ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
ip -br a

# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
dig +short github.com

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
traceroute 8.8.8.8

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ firewall
sudo ufw status verbose
```