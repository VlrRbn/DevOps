# Bash_Variables_and_Constructs

## Аргументы скрипта

- `$0` — имя скрипта
- `$1`, `$2`, … — позиционные аргументы
- `$#` — количество аргументов
- `$@` — все аргументы как отдельные слова (`"$@"` — правильно форвардить)
- `$*` — все аргументы одной строкой
- `shift` — сдвинуть аргументы влево (удалить `$1`, `$2` становится `$1` и т.д.)

---

## Статусы и процессы

- `$?` — код возврата последней команды (0 = успех)
- `$$` — PID текущего скрипта
- `$!` — PID последнего фонового процесса (`&`)
- `$_` — последний аргумент предыдущей команды

---

## Переменные и их расширения

- `${var}` — значение переменной
- `${var:-default}` — если пусто/не задана → использовать `default`
- `${var:=default}` — если пусто/не задана → присвоить `default`
- `${var:+alt}` — если переменная задана → использовать `alt`, иначе пусто
- `${#var}` — длина строки
- `${var%pattern}` — убрать кратчайший суффикс
- `${var%%pattern}` — убрать самый длинный суффикс
- `${var#pattern}` — убрать кратчайший префикс
- `${var##pattern}` — убрать самый длинный префикс

---

## Массивы

```bash
arr=(a b c)
${arr[0]}   # первый элемент
${arr[@]}   # все элементы
${#arr[@]}  # длина массива
```

---

## Арифметика

```bash
$((n+1))     # сложение
$((n*2))     # умножение
$((a/b))     # деление (целое)
```

---

## Отладка и поведение

- `set -x` — печатать команды перед выполнением (debug)
- `set -e` — выходить, если любая команда завершилась с ошибкой

---

| **EN** | **RU** |
| --- | --- |
| `$0` — script name | `$0` — имя скрипта |
| `$1`, `$2`, … — first, second, … argument | `$1`, `$2`, … — первый, второй аргумент |
| `$#` — number of arguments | `$#` — количество аргументов |
| `$@` — all args as separate quoted words | `$@` — все аргументы по отдельности (с кавычками) |
| `$*` — all args as one string | `$*` — все аргументы одной строкой |
| `shift` — drop first arg, shift others left | `shift` — убрать первый аргумент, остальные сдвигаются |
| `$?` — exit code of last command (0=success) | `$?` — код выхода последней команды (0=успех) |
| `$$` — PID of current script | `$$` — PID текущего скрипта |
| `$!` — PID of last background process | `$!` — PID последнего фонового процесса |
| `$_` — last argument of previous command | `$_` — последний аргумент предыдущей команды |
| `${var}` — variable value | `${var}` — значение переменной |
| `${var:-default}` — use `default` if empty/unset | `${var:-default}` — если пустая → подставить `default` |
| `${var:=default}` — set `default` if empty/unset | `${var:=default}` — если пустая → подставить и сохранить |
| `${var:+alt}` — use `alt` if var is set | `${var:+alt}` — если переменная есть → подставить `alt` |
| `${#var}` — string length | `${#var}` — длина строки |
| `${var%pattern}` — remove shortest suffix | `${var%pattern}` — убрать короткий суффикс |
| `${var%%pattern}` — remove longest suffix | `${var%%pattern}` — убрать длинный суффикс |
| `${var#pattern}` — remove shortest prefix | `${var#pattern}` — убрать короткий префикс |
| `${var##pattern}` — remove longest prefix | `${var##pattern}` — убрать длинный префикс |
| Arrays: `arr=(a b c)` | Массивы: `arr=(a b c)` |
| `${arr[0]}` — first element | `${arr[0]}` — первый элемент |
| `${arr[@]}` — all elements | `${arr[@]}` — все элементы |
| `${#arr[@]}` — length of array | `${#arr[@]}` — длина массива |
| Math: `$((n+1))`, `$((n*2))` | Арифметика: `$((n+1))`, `$((n*2))` |
| `"$@"` — safest way to forward args | `"$@"` — безопасная передача всех аргументов |
| `set -x` — debug: print commands before running | `set -x` — отладка: печатать команды |
| `set -e` — exit if any command fails | `set -e` — выйти при первой ошибке |