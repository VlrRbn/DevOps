groups:
  - name: labweb-slo
    rules:
    - alert: LabwebHighErrorRateFast
      expr: labweb:http_error_ratio_5m > 0.1
      for: 5m
      labels:
        severity: critical
        service: labweb
        slo_window: "fast"
      annotations:
        summary: "labweb error ratio {{ $value | humanizePercentage }} (>10%, 5m)"
        description: "More than 10% of requests are 5xx over the last 5 minutes."

    - alert: LabwebHighErrorRateSlow
      expr: labweb:http_error_ratio_5m > 0.02
      for: 30m
      labels:
        severity: warning
        service: labweb
        slo_window: "slow"
      annotations:
        summary: "labweb error ratio {{ $value | humanizePercentage }} (>2%, 30m)"
        description: "Sustained elevated 5xx ratio; check deployment or backend health."

    - alert: LabwebHighCpu
      expr: labweb:cpu_usage_ratio_5m > 0.85
      for: 10m
      labels:
        severity: warning
        service: labweb
      annotations:
        summary: "labweb CPU {{ $value | humanizePercentage }} (>85%, 5m avg)"
        description: "Node CPU usage is above 85% for 10 minutes."
